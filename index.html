<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Bat Yam 100</title>

  <!-- favicon (×”×§×•×‘×¥ × ××¦× ×‘×ª×™×§×™×” ×©×œ×š) -->
  <link rel="icon" href="favicon.ico" />

  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;700;900&family=Rubik:wght@400;600;800;900&family=Frank+Ruhl+Libre:wght@400;700;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --ink:#0d1b2a;
      --blue:#0057a8;
      --sky:#2196f3;
      --gold:#f5a623;
      --mint:#00b89c;
      --bg:#f4f6f9;
      --card:#ffffff;
      --border:#e4e9f0;
      --muted:#7a8899;
      --danger:#ef4444;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      background:var(--bg);
      font-family:'Heebo',sans-serif;
      color:var(--ink);
      -webkit-tap-highlight-color:transparent;
      overscroll-behavior-y:none;
    }
    @keyframes spin {to{transform:rotate(360deg)}}
    @keyframes fade {from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
    @keyframes pop  {from{transform:scale(.92);opacity:0}to{transform:scale(1);opacity:1}}

    #ldr{
      position:fixed; inset:0; background:var(--ink); z-index:9999;
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      transition:opacity .5s;
    }
    #ldr .ring{
      width:60px; height:60px; border:3px solid rgba(255,255,255,.12);
      border-top-color:var(--gold); border-radius:50%;
      animation:spin 1s linear infinite; margin-bottom:18px;
    }
    #ldr p{color:rgba(255,255,255,.45); font-size:10px; font-weight:800; letter-spacing:.2em; text-transform:uppercase}

    .topWrap{
      position:sticky; top:0; z-index:80;
      background:linear-gradient(180deg, rgba(13,27,42,1) 0%, rgba(13,27,42,1) 65%, rgba(13,27,42,.0) 100%);
      padding-bottom:10px;
    }

    .hero{
      position:relative; height:220px;
      border-radius:0 0 28px 28px; overflow:hidden;
      background:var(--ink);
      box-shadow:0 18px 44px -14px rgba(13,27,42,.55);
      margin:0 14px;
    }
    .hero-bg{
      background-image:url('baner.jpg');
      background-size:cover; background-position:center;
      position:absolute; inset:0; opacity:.55;
    }
    .hero-stripe{
      position:absolute; bottom:0; left:0; right:0; height:4px;
      background:linear-gradient(90deg,var(--gold) 0%,var(--mint) 50%,var(--sky) 100%);
    }
    .hero-c{
      position:relative; z-index:2;
      padding:18px 18px;
      height:100%;
      display:flex; flex-direction:column; justify-content:space-between;
    }
    .glass-pill{
      background:rgba(255,255,255,.14);
      backdrop-filter:blur(14px); -webkit-backdrop-filter:blur(14px);
      border:1px solid rgba(255,255,255,.22);
      color:white; border-radius:40px;
      display:inline-flex; align-items:center; gap:7px;
      padding:7px 14px; font-size:12px; font-weight:800;
      cursor:pointer; transition:all .18s;
    }
    .glass-pill:active{transform:scale(.94); background:rgba(255,255,255,.28)}
    .glass-ic{
      background:rgba(255,255,255,.14);
      backdrop-filter:blur(14px); -webkit-backdrop-filter:blur(14px);
      border:1px solid rgba(255,255,255,.22);
      color:white; border-radius:50%;
      width:38px; height:38px; display:flex; align-items:center; justify-content:center;
      cursor:pointer; transition:all .18s;
    }
    .glass-ic:active{transform:scale(.92)}
    .hero-dot{width:8px;height:8px;border-radius:50%;background:#4ade80}

    .hero-title{
      font-family:'Rubik',sans-serif;
      font-size:40px; font-weight:900; color:white;
      line-height:.92; letter-spacing:-1px;
      text-shadow:0 2px 16px rgba(0,0,0,.4);
    }
    .hero-title span{
      font-family:'Frank Ruhl Libre',serif;
      color:var(--gold);
      letter-spacing:-.6px;
    }
    .hero-sub{color:rgba(255,255,255,.72); font-size:13px; font-weight:400; margin-top:6px}

    .stats-row{
      display:flex; gap:10px;
      padding:0 14px;
      margin:-18px 0 10px;
      position:relative; z-index:5;
    }
    .stat{
      flex:1; background:var(--card);
      border-radius:16px; padding:14px 12px;
      box-shadow:0 4px 20px rgba(0,0,0,.08);
      border-top:3px solid transparent;
      animation:fade .4s ease both;
    }
    .stat:nth-child(1){border-top-color:var(--blue)}
    .stat:nth-child(2){border-top-color:var(--mint)}
    .stat:nth-child(3){border-top-color:var(--gold)}
    .stat-num{font-size:30px;font-weight:900;color:var(--ink);line-height:1}
    .stat-lbl{font-size:10px;font-weight:800;color:var(--muted);margin-top:3px;text-transform:uppercase;letter-spacing:.04em}

    .sec-head{display:flex;justify-content:space-between;align-items:center;padding:0 14px;margin:12px 0 12px}
    .sec-title{
      font-size:13px;font-weight:900;color:var(--ink);
      display:flex;align-items:center;gap:8px;
      text-transform:uppercase;letter-spacing:.06em
    }
    .sec-title::before{content:'';width:3px;height:16px;background:var(--blue);border-radius:2px;display:block}

    #eCards{
      display:grid; grid-template-columns:1fr; gap:10px;
      padding:0 14px 18px;
    }
    @media (min-width: 900px){
      .containerWide{max-width:1100px;margin:0 auto}
      #eCards{grid-template-columns:repeat(2,1fr)}
    }
    @media (min-width: 1200px){
      #eCards{grid-template-columns:repeat(3,1fr)}
    }
    .ecard{
      background:var(--card); border-radius:18px;
      box-shadow:0 2px 12px rgba(0,0,0,.06);
      border:1px solid var(--border);
      display:flex; align-items:stretch; overflow:hidden;
      cursor:pointer; transition:transform .15s, box-shadow .15s;
      animation:fade .25s ease both;
    }
    .ecard:active{transform:scale(.98); box-shadow:0 1px 6px rgba(0,0,0,.07)}
    .ecard-accent{width:5px; flex-shrink:0; background:var(--blue)}
    .ecard-accent.mine{background:var(--mint)}
    .ecard-accent.done{background:#d1d5db}
    .ecard-date{
      width:60px; flex-shrink:0;
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      padding:12px 0;
      border-left:1px solid var(--border);
      background:#fafbfc;
    }
    .ecard-date .day{font-size:26px;font-weight:900;color:var(--ink);line-height:1}
    .ecard-date .day.range{font-size:16px;font-weight:900;color:var(--blue);line-height:1.1}
    .ecard-date .mon{font-size:9px;font-weight:800;color:var(--muted);text-transform:uppercase;margin-top:2px}
    .ecard-body{flex:1; padding:14px 14px 14px 12px; min-width:0}
    .ecard-title{font-size:15px;font-weight:800;color:var(--ink);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:6px}
    .ecard-meta{display:flex;align-items:center;gap:6px;flex-wrap:wrap}
    .ecard-owner{font-size:11px;color:var(--muted);font-weight:700}

    .pill{display:inline-block;padding:3px 9px;border-radius:20px;font-size:10px;font-weight:800;letter-spacing:.02em;white-space:nowrap}
    .pill-new{background:#dbeafe;color:#1e40af}
    .pill-wip{background:#fef3c7;color:#92400e}
    .pill-done{background:#d1fae5;color:#065f46}
    .pill-wait{background:#f3f4f6;color:#4b5563}

    .navTop{
      margin:10px 14px 0;
      background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.16);
      backdrop-filter:blur(10px);
      border-radius:22px;
      display:flex; gap:8px; justify-content:space-between; align-items:center;
      padding:6px;
    }
    .nb{
      flex:1;
      padding:10px 10px; border-radius:18px;
      color:rgba(255,255,255,.62);
      display:flex; flex-direction:column; align-items:center; gap:3px;
      font-size:9px; font-weight:900; letter-spacing:.04em;
      background:none; border:none; cursor:pointer;
      transition:all .2s; text-transform:uppercase;
    }
    .nb.on{color:white; background:rgba(255,255,255,.14)}
    .nbAdd{
      background:var(--gold); color:var(--ink);
      padding:12px; border-radius:18px;
      border:2px solid rgba(0,0,0,.35);
      cursor:pointer; transition:all .18s;
      min-width:52px;
      display:flex; align-items:center; justify-content:center;
    }
    .nbAdd:active{transform:scale(.93)}
    .badge{position:absolute; top:6px; right:10px; width:8px;height:8px;background:var(--danger);border-radius:50%; border:2px solid rgba(13,27,42,1)}

    .ov{
      position:fixed; inset:0; background:rgba(13,27,42,.7);
      display:flex; align-items:flex-end; justify-content:center;
      z-index:150; backdrop-filter:blur(6px);
    }
    @media (min-width:768px){.ov{align-items:center;padding:20px}}
    .sh{
      background:var(--card); width:100%; max-width:520px;
      border-radius:28px 28px 0 0;
      display:flex; flex-direction:column; max-height:92vh;
      animation:pop .22s ease both;
      box-shadow:0 -8px 48px rgba(13,27,42,.25);
    }
    @media (min-width:768px){.sh{border-radius:28px; max-height:86vh}}
    .sh-head{
      padding:16px 18px; display:flex; justify-content:space-between; align-items:center;
      border-bottom:1px solid var(--border); flex-shrink:0;
    }
    .sh-title{font-size:18px;font-weight:900;color:var(--ink)}
    .close-btn{
      width:34px;height:34px;border-radius:50%;
      background:#f1f5f9;border:none;cursor:pointer;
      display:flex;align-items:center;justify-content:center;
    }

    .fld{
      width:100%; padding:12px 14px; background:#f8fafc; border-radius:12px;
      border:1.5px solid var(--border); outline:none;
      font-family:'Heebo',sans-serif; font-size:14px; color:var(--ink);
      transition:all .2s;
    }
    .fld:focus{border-color:var(--blue); background:white; box-shadow:0 0 0 3px rgba(0,87,168,.1)}
    label.lbl{font-size:10px;font-weight:900;color:var(--muted);text-transform:uppercase;letter-spacing:.05em;display:block;margin-bottom:6px}

    .tTab{
      flex:1; padding:10px 12px; border-radius:14px; border:1.5px solid var(--border);
      background:var(--card); cursor:pointer; font-weight:900; font-size:12px; color:var(--muted);
    }
    .tTab.on{border-color:var(--blue); color:var(--blue); background:#eff6ff}
    .taskTabs{display:flex; gap:8px; padding:0 14px; margin-top:10px;}

    .tr{
      display:flex; align-items:center; gap:10px;
      padding:10px 12px; background:#f8fafc;
      border-radius:10px; border:1px solid var(--border);
    }
    .tr input[type=checkbox]{width:18px;height:18px;accent-color:var(--blue);cursor:pointer;flex-shrink:0}
    .tr.done span{text-decoration:line-through;color:var(--muted)}
    .tMeta{
      font-size:10px; font-weight:800; color:var(--muted);
      display:flex; gap:8px; flex-wrap:wrap; margin-top:4px;
    }

    .btnMini{
      font-size:11px; font-weight:900;
      color:var(--blue);
      background:#eff6ff;
      border:1px solid #bfdbfe;
      border-radius:10px;
      padding:7px 10px;
      cursor:pointer;
      font-family:'Heebo',sans-serif;
    }
    .btnMain{
      width:100%;
      background:var(--ink); color:white;
      padding:15px; border-radius:14px;
      font-weight:900; font-size:15px;
      border:none; cursor:pointer;
      font-family:'Heebo',sans-serif;
      box-shadow:0 4px 18px rgba(13,27,42,.35);
      letter-spacing:.03em;
    }

    .lw{position:fixed; inset:0; background:var(--ink); z-index:200; display:flex; align-items:center; justify-content:center; padding:24px}
    .lb{background:white;border-radius:28px;padding:36px 28px;width:100%;max-width:360px;text-align:center;animation:pop .2s ease both}
    .lb-top{height:5px;border-radius:28px 28px 0 0;margin:-36px -28px 32px;background:linear-gradient(90deg,var(--gold),var(--mint),var(--sky))}
    .chip{padding:10px 18px;border-radius:40px;border:2px solid var(--border);cursor:pointer;font-weight:900;font-size:14px;background:white;transition:all .15s;color:var(--ink)}
    .chip.sel{border-color:var(--blue);background:#eff6ff;color:var(--blue)}
  </style>
</head>

<body>
  <div id="ldr">
    <div class="ring"></div>
    <p>BAT YAM 100</p>
  </div>

  <div id="lw" class="lw" style="display:none">
    <div class="lb">
      <div class="lb-top"></div>
      <div style="font-size:36px;margin-bottom:12px">ğŸ™ï¸</div>
      <h2 style="font-size:24px;font-weight:900;color:var(--ink);margin-bottom:4px;font-family:'Frank Ruhl Libre',serif">BAT YAM 100</h2>
      <p style="color:var(--muted);font-size:13px;margin-bottom:22px">××™ ××ª/×”?</p>
      <div id="lchips" style="display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin-bottom:16px"></div>
      <input id="lname" type="text" placeholder="×©× ××—×¨..." class="fld" style="text-align:center;margin-bottom:14px">
      <button id="lbtn" class="btnMain">×›× ×™×¡×” â†</button>
    </div>
  </div>

  <div id="app" style="display:none">
    <div class="topWrap">

      <div class="hero containerWide">
        <div class="hero-bg"></div>
        <div class="hero-c">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <button id="btnUser" class="glass-pill">
              <span class="hero-dot"></span>
              <span id="uLabel">××•×¨×—</span>
              <i data-lucide="chevron-down" style="width:13px;height:13px;opacity:.7"></i>
            </button>
            <div style="display:flex;gap:8px">
              <button id="btnRefresh" class="glass-ic"><i data-lucide="refresh-cw" style="width:17px;height:17px"></i></button>
            </div>
          </div>
          <div>
            <div class="hero-title">BAT YAM<br><span>100</span></div>
            <p class="hero-sub">× ×™×”×•×œ ×¤×¨×•×™×§×˜×™× ×¢×™×¨×•× ×™ Â· 2026</p>
          </div>
        </div>
        <div class="hero-stripe"></div>
      </div>

      <div class="navTop containerWide">
        <button id="nb-list" class="nb on"><i data-lucide="home" style="width:20px;height:20px"></i><span>×‘×™×ª</span></button>
        <button id="nb-tasks" class="nb" style="position:relative">
          <i data-lucide="check-square" style="width:20px;height:20px"></i><span>××©×™××•×ª</span>
          <span id="tbadge" class="badge" style="display:none"></span>
        </button>
        <button id="nb-add" class="nbAdd"><i data-lucide="plus" style="width:24px;height:24px"></i></button>
        <button id="nb-cal" class="nb"><i data-lucide="calendar" style="width:20px;height:20px"></i><span>×œ×•×— ×©× ×”</span></button>
        <button id="nb-set" class="nb"><i data-lucide="user" style="width:20px;height:20px"></i><span>×¤×¨×•×¤×™×œ</span></button>
      </div>

      <div class="stats-row containerWide">
        <div class="stat"><div id="stT" class="stat-num">0</div><div class="stat-lbl">×¤×¨×•×™×§×˜×™×</div></div>
        <div class="stat"><div id="stM" class="stat-num">0</div><div class="stat-lbl">×©×œ×™</div></div>
        <div class="stat"><div id="stA" class="stat-num">0</div><div class="stat-lbl">×¤×ª×•×—×™×</div></div>
      </div>
    </div>

    <div id="vList" class="containerWide">
      <div class="sec-head">
        <span class="sec-title">×›×œ ×”×¤×¨×•×™×§×˜×™×</span>
        <span id="countBadge" style="font-size:11px;font-weight:800;color:var(--muted)"></span>
      </div>
      <div id="eCards"></div>
      <div style="height:18px"></div>
    </div>

    <div id="vCal" style="display:none" class="containerWide">
      <div class="sec-head" style="margin-top:6px">
        <span class="sec-title">×œ×•×— ×©× ×”</span>
        <div style="display:flex;gap:8px">
          <button id="calP" class="btnMini"><i data-lucide="chevron-right" style="width:16px;height:16px"></i></button>
          <button id="calN" class="btnMini"><i data-lucide="chevron-left" style="width:16px;height:16px"></i></button>
        </div>
      </div>
      <div id="calTit" style="padding:0 14px 10px;font-weight:900"></div>
      <div style="padding:0 14px">
        <div style="display:grid;grid-template-columns:repeat(7,1fr);gap:3px;text-align:center;font-size:9px;font-weight:900;color:var(--muted);text-transform:uppercase;letter-spacing:.05em;margin-bottom:5px">
          <div>××³</div><div>×‘×³</div><div>×’×³</div><div>×“×³</div><div>×”×³</div><div>×•×³</div><div>×©×³</div>
        </div>
        <div id="calG" style="display:grid;grid-template-columns:repeat(7,1fr);gap:3px;padding-bottom:18px"></div>
      </div>
    </div>

    <div id="vTasks" style="display:none" class="containerWide">
      <div class="sec-head">
        <span class="sec-title">××©×™××•×ª</span>
        <select id="tFilter" class="fld" style="width:auto;font-size:12px;font-weight:900;padding:9px 10px;cursor:pointer">
          <option value="">×›×•×œ×</option>
        </select>
      </div>

      <div class="taskTabs">
        <button id="tabDoing" class="tTab on">×‘×‘×™×¦×•×¢</button>
        <button id="tabDone" class="tTab">×‘×•×¦×¢×•</button>
      </div>

      <div id="tCards" style="display:flex;flex-direction:column;gap:10px;padding:12px 14px 18px"></div>
    </div>
  </div>

  <!-- Add / View / Settings modals -->
  <div id="mAdd" class="ov" style="display:none"></div>
  <div id="mView" class="ov" style="display:none"></div>
  <div id="mSet" class="ov" style="display:none"></div>

  <script>
    /* =========================
       CONFIG (×”-URL ×©×œ×š ×›×‘×¨ ×‘×¤× ×™×)
       ========================= */
 const POST = "https://script.google.com/macros/s/AKfycbyrNFulYT80K4HmDIUxhsSmZDD9aqKdJGf2c0SinFHoX50FdXnOKHc2dFemwXuvesINqg/exec";
 const OWNER_PRESET = ['×‘×Ÿ','×¨×™× ×ª','×’×œ×™×ª','××‘×™×©×™','××•×¨','×™×•×¡×™','×¨×•×ª×'];

    /* =========================
       IMPORTANT NOTE
       =========================
       ×”-URL ×”×–×” (script.googleusercontent.com) ×‘×“×¨×š ×›×œ×œ ×¢×•×‘×“ ×œ-GET (×§×¨×™××”),
       ××‘×œ ×”×¨×‘×” ×¤×¢××™× ×”×•× "×œ× ×××¤×©×¨ POST" (×¢×“×›×•×Ÿ/×™×¦×™×¨×”) ×‘×’×œ×œ CORS/Redirect.
       ×× ××ª×” ×¨×•×¦×” ×©×’× ×”×•×¡×¤×”/×¢×“×›×•×Ÿ ×™×¢×‘×“×• ×ª××™×“,
       ×¦×¨×™×š ×œ×”×©×ª××© ×“×•×•×§× ×‘-URL ×©××¡×ª×™×™× ×‘ /exec ×©×œ ×”-WebApp.
       ×× ××ª×” ×©×•×œ×— ×œ×™ ××ª ×”-/exec ×©×œ×š â€“ ×× ×™ ××—×–×™×¨ ×œ×š ×§×•×“ ×©×¢×•×‘×“ 100%.
    */

    /* =========================
       For now: We'll try, and if POST fails you'll see it immediately.
       ========================= */

    let events = [];
    let me = localStorage.getItem('batyam_user') || '';
    let calY = new Date().getFullYear(), calM = new Date().getMonth();

    const $ = (id) => document.getElementById(id);

    window.addEventListener('DOMContentLoaded', () => {
      lucide.createIcons();
      // ××™× ×™××•× ×›×“×™ ×œ× ×œ×©×‘×•×¨ ×œ×š ××ª ×”××¡×š:
      // (×”××•×“×œ×™× ×”×•×©××˜×• ×›××Ÿ ×›×“×™ ×œ×©××•×¨ ×¢×œ ×ª×©×•×‘×” ×§×¦×¨×” â€” ××‘×œ ×× ××ª×” ×¨×•×¦×”,
      // ×× ×™ ××—×–×™×¨ ×œ×š ×’×¨×¡×” ××œ××” ×¢× ×›×œ ×”××•×“×œ×™× ×›××• ×”×§×•×“ ×”×§×•×“×.)
      hideLoader();
      alert('×”×›× ×¡×ª×™ ××ª ×”-URL ×œ-HTML. ×¢×›×©×™×• ×©×œ×— ×œ×™ ××ª ×”-URL ×©×œ ×”-WebApp ×©××¡×ª×™×™× ×‘-/exec ×›×“×™ ×©×”×•×¡×¤×”/×¢×“×›×•×Ÿ ×™×¢×‘×“×• ×‘×•×•×“××•×ª.');
    });

    function hideLoader(){
      const l=document.getElementById('ldr');
      l.style.opacity='0';
      setTimeout(()=>{ l.style.display='none'; }, 450);
    }
  </script>
</body>
</html>
